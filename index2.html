<!DOCTYPE html>
<html>
	<head>
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="js/three.js"></script>
		<script src="js/OrbitControls.js"></script>
		<script src="js/DeviceOrientationControls.js"></script>
		<script src="js/StereoEffect.js"></script>
		<script>
		
			var scene = new THREE.Scene();
		    var camera;
	     	var effect;
			
			var renderer = new THREE.WebGLRenderer();
		    
			document.body.appendChild( renderer.domElement );
			camera =new  THREE.PerspectiveCamera( 45, window.innerWidth/window.innerHeight,1, 1000 );
			group = new THREE.Group();
		    scene.add( group );
            window.addEventListener( 'resize', onWindowResize, false );
			//var materialNormalMap = new THREE.MeshPhongMaterial( {
					//specular: 0x333333,
					//shininess: 15,
				//	map: new THREE.TextureLoader().load( "textures/planets/earth_atmos_2048.jpg" ),
				//	specularMap: new THREE.TextureLoader().load( "textures/planets/earth_specular_2048.jpg" ),
				//	normalMap: new THREE.TextureLoader().load( "textures/planets/earth_normal_2048.jpg" ),
				
				//	side:THREE.DoubleSide
				//} );
			
				geometry = new THREE.SphereBufferGeometry( 50, 100, 50 );
				var material = new THREE.MeshBasicMaterial( {
					map: new THREE.TextureLoader().load( 'textures/planets/earth_atmos_2048.jpg' )
				} );
               			geometry.scale( - 1, 1, 1 );
				meshPlanet = new THREE.Mesh( geometry, material );
				group.add( meshPlanet );
				meshPlanet.scale.x=-1;
				var light = new THREE.PointLight( 0xffffff, 1, 150 );
				light.position.set( 0, 0, 0 );
				group.add( light );
            var mob=false;
		
 			var controls;
					if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
		         		 
		         		 controls = new THREE.DeviceOrientationControls( camera );
		         		 
		         		 effect = new THREE.StereoEffect(renderer);
		         		 renderer.setPixelRatio( window.devicePixelRatio );
						 effect.setSize( window.innerWidth, window.innerHeight );
						 mob=true;
                        }
                        else
                        {  
                        	controls =  new THREE.OrbitControls( camera );
                        	controls.enablePan = false;
							controls.enableZoom = false; 
                            
                            renderer.setSize( window.innerWidth, window.innerHeight );
                        }
					
				camera.rotation.y = 90 * Math.PI / 180;
				camera.rotation.x = 90 * Math.PI / 180;
				camera.rotation.z = 90 * Math.PI / 180;
				camera.position.set( 0, 0.01 ,0 );
				controls.update;
			var animate = function () {
						  requestAnimationFrame( animate );
		 				 controls.update();
                     if(mob)
		 				 {render();}
		 				else
						{ renderer.render( scene, camera );}
			};
				function onWindowResize() {
				if (mob)
				{windowHalfX = window.innerWidth / 2;
				windowHalfY = window.innerHeight / 2;
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				effect.setSize( window.innerWidth, window.innerHeight );}
			}
			function render() {
		
				effect.render( scene, camera );
               }
			animate();
		</script>
	</body>
</html>
